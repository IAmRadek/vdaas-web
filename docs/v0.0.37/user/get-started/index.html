<!DOCTYPE html>
<html>
  <head>
    
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164223416-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-164223416-1');
    </script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="robots" content="index, follow">
    <title>Vald</title>
    <meta name="description" content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine">
    <meta name="keywords" content="vald,vdass">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta property="og:type" content="article">
    <meta property="og:title" content="Vald">
    <meta property="og:description" content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine">
    <meta property="og:url" content="https://vald.vdaas.org">
    <meta property="og:image" content="https://vald.netlify.app/images/ogp_vald.png">
    <meta property="og:site_name" content="vald">
    <meta property="og:locale" content="en_US">
    <meta property="fb:app_id" content="615732422350002">
    <meta name="twitter:site" content="@vdaas_vald">
    
    <meta name="twitter:card" content="app">
    <link rel="shortcut icon" href="https://vald.netlify.app/favicon.ico">
    <link rel="canonical" href="https://github.com/vdaas/vald">
    <link rel="stylesheet" type="text/css" href="https://vald.netlify.app/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://vald.netlify.app/css/header.css">
    <link rel="stylesheet" type="text/css" href="https://vald.netlify.app/css/footer.css">
    <link rel="stylesheet" type="text/css" href="https://vald.netlify.app/css/main.css">
    <script type="text/javascript" src="https://vald.netlify.app/js/script.js" defer></script>
  </head>

  <body>
    <header class="header" id="header">
  <div class="header__content">
    <nav class="header__nav cf">
      <a href="https://vald.vdaas.org" class="header-nav__link">
        <picture>
          <source srcset="https://vald.netlify.app/images/vald_white.svg" media="(prefers-color-scheme: dark)" class="header-nav__image">
          <img src="https://vald.netlify.app/images/vald_color_1.svg" alt="" class="header-nav__image">
        </picture>
      </a>
      <a class="header-nav__icon" id="nav-btn"><span class="header-nav__button"></span></a>
      <ul class="header__list" id="menu">
        <li class="header__item">
          <a href="https://vald.netlify.app/docs/overview/about-vald" class="header__link">About</a>
        </li>
        <li class="header__item">
          <a href="https://vald.netlify.app/docs/tutorial/get-started" class="header__link">Get Started</a>
        </li>
        <li class="header__item">
          <a href="" class="header__link">Docs</a>
        </li>
        <li class="header__item">
          <a href="" class="header__link">Blog</a>
        </li>
        <li class="header__item">
          <a href="https://github.com/vdaas/vald" target="_blank" class="header__link header__link--button">Github</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <main role="main">
      
        <div class="single">
          


<aside class="page">
  
  <nav class="open">
    <button class="index" id="list-button">Pages</button>
    <ul id="list-body">
      

  
    <li class="withchild">Overview
        



   
   

   
   

   
   

   
   

   
   

   
   


    </li>
  



  
    <li class="withchild">Tutorial
        



   
   

   
   


    </li>
  



  
    <li class="withchild">User Guides
        



   
   

   
   


    </li>
  







  
    <li class="withchild">Contributing
        



   
   

   
   

   
   

   
   

   
   


    </li>
  



  
    <li class="withchild">Support
        



   
   

   
   


    </li>
  



  
    <li class="withchild">Release
        



   
   

   
   

   
   


    </li>
  

</ul>
  <nav>
</aside>


<div class="content">
  <div class="markdown">
    <h1 id="get-started">Get Started</h1>
<p>This article will show you how to deploy and run Vald on your k8s cluster.
This article uses Scylla DB as the backend data store for metadata-management and backup-manager.
Fashion-mnist is used as an example of a dataset.</p>
<ol>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#deploy-and-run-vald-on-k8s-cluster">Deploy and Run Vald on k8s cluster</a>
<ol>
<li><a href="#deploy">Deploy</a></li>
<li><a href="#run">Run</a></li>
</ol>
</li>
<li><a href="#advanced">Advanced</a>
<ol>
<li><a href="#customize-vald">Customize Vald</a></li>
<li><a href="#another-way-to-deploy-vald">Another way to deploy Vald</a></li>
</ol>
</li>
</ol>
<h2 id="requirements">Requirements</h2>
<ul>
<li>k8s:  v1.17 ~</li>
<li>go:   v1.14 ~</li>
<li>helm: v3 ~</li>
<li>libhdf5 (<em>only required for this tutorial.</em>)</li>
</ul>
<p>Helm and hdf5 is required for this tutorial. If helm or hdf5 is not installed, please install <a href="https://helm.sh/docs/intro/install">helm</a> and <a href="https://www.hdfgroup.org/">hdf5</a>.</p>
<details><summary>[Optional] Install helm</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash
</code></pre></div></details>
<details><summary>[Optional] Install hdf5</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># yum</span>
yum install -y hdf5-devel

<span style="color:#75715e"># apt</span>
apt-get install libhdf5-serial-dev

<span style="color:#75715e"># homebrew</span>
brew install hdf5
</code></pre></div></details>
<h2 id="deploy-and-run-vald-on-k8s-cluster">Deploy and Run Vald on K8s cluster</h2>
<h3 id="deploy">Deploy</h3>
<p>This section shows how to deploy Vald with Scylla using Helm.
Scylla is used as a datastore for index-metadata and backup-manager.
If you want to learn about Scylla, please refer to <a href="https://www.scylladb.com/">the official website</a>.</p>
<ol>
<li>
<p>Confirm which cluster to deploy</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl cluster-info
</code></pre></div></li>
<li>
<p>Prepare Scylla DB and k8s metrics-server</p>
<p>Deploy Scylla as a backup database.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f k8s/jobs/db/initialize/cassandra/configmap.yaml
kubectl apply -f k8s/external/scylla
</code></pre></div><p>Apply k8s metrics-server</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f k8s/metrics/metrics-server
</code></pre></div></li>
<li>
<p>Deploy Vald using helm</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">helm repo add vald https://vald.vdaas.org/charts
helm install vald vald/vald --values example/helm/values-scylla.yaml
</code></pre></div></li>
<li>
<p>Verify</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl get pods
</code></pre></div> <details><summary>Example output</summary><br>
 If the deployment is successful, all Vald components should be running.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">NAME                                       READY   STATUS    RESTARTS   AGE
scylla-0                                   1/1     Running   <span style="color:#ae81ff">0</span>          13m
scylla-1                                   1/1     Running   <span style="color:#ae81ff">0</span>          12m
scylla-2                                   1/1     Running   <span style="color:#ae81ff">0</span>          10m
vald-agent-ngt-0                           1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-agent-ngt-1                           1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-agent-ngt-2                           1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-agent-ngt-3                           1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-agent-ngt-4                           1/1     Runnnig   <span style="color:#ae81ff">0</span>          5m49s
vald-discoverer-97c88678b-wj6xn            1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-gateway-5bf95f8d97-2v76g              1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-gateway-5bf95f8d97-5wtb2              1/1     Running   <span style="color:#ae81ff">0</span>          78s
vald-gateway-5bf95f8d97-7d6j7              1/1     Running   <span style="color:#ae81ff">0</span>          78s
vald-gateway-5bf95f8d97-gx45c              1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-gateway-5bf95f8d97-kx2c5              1/1     Running   <span style="color:#ae81ff">0</span>          78s
vald-gateway-5bf95f8d97-np2lc              1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-backup-6c9695b69b-9xngp       1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-backup-6c9695b69b-jvwft       1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-backup-6c9695b69b-mjs2r       1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-compressor-6c95bdbfb5-m5t7t   1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-compressor-6c95bdbfb5-q8hc6   1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-compressor-6c95bdbfb5-zp8hb   1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-manager-index-59676f54bb-nzfwt        1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-meta-559744db-bcrdw                   1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
vald-meta-559744db-hz7gd                   1/1     Running   <span style="color:#ae81ff">0</span>          5m49s
</code></pre></div> </details>
</li>
</ol>
<h3 id="run-using-example-code">Run using example code</h3>
<p>This chapter shows how to perform a search action in Vald with fashion-mnist dataset.</p>
<ol>
<li>
<p>Port Forward</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl port-forward deployment/vald-gateway 8081:8081
</code></pre></div></li>
<li>
<p>Download dataset</p>
<p>In this tutorial. we use <a href="https://github.com/zalandoresearch/fashion-mnist">fashion-mnist</a> as a dataset for indexing and search query.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># move to working directory</span>
cd example/client
   
<span style="color:#75715e"># download fashion-mnist testing dataset</span>
wget http://ann-benchmarks.com/fashion-mnist-784-euclidean.hdf5
</code></pre></div></li>
<li>
<p>Running example</p>
<p>Vald provides multiple langurages client library such as golang, Java, Node.js, Python and so on.<br>
In this example, the fashion-mnist dataset will insert into the vald cluster and perform a search using <a href="https://github.com/vdaas/vald-client-go">vald-client-go</a>.</p>
<p>We use <a href="../../example/client/main.go"><code>example/client/main.go</code></a> to run the example.
This will execute 4 steps.</p>
<ol>
<li>init</li>
</ol>
<ul>
<li>
<p>Import packages</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;context&#34;</span>
    <span style="color:#e6db74">&#34;encoding/json&#34;</span>
    <span style="color:#e6db74">&#34;flag&#34;</span>
    <span style="color:#e6db74">&#34;time&#34;</span>

    <span style="color:#e6db74">&#34;github.com/kpango/fuid&#34;</span>
    <span style="color:#e6db74">&#34;github.com/kpango/glg&#34;</span>
    <span style="color:#e6db74">&#34;github.com/vdaas/vald-client-go/gateway/vald&#34;</span>
    <span style="color:#e6db74">&#34;github.com/vdaas/vald-client-go/payload&#34;</span>

    <span style="color:#e6db74">&#34;gonum.org/v1/hdf5&#34;</span>
    <span style="color:#e6db74">&#34;google.golang.org/grpc&#34;</span>
)
</code></pre></div>  </details>
</li>
<li>
<p>Set variables</p>
<ul>
<li>
<p>The constant number of training datasets and test datasets.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">insertCount</span> = <span style="color:#ae81ff">400</span>
    <span style="color:#a6e22e">testCount</span> = <span style="color:#ae81ff">20</span>
)
</code></pre></div>  </details>
</li>
<li>
<p>The variables for configuration.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> (
    <span style="color:#a6e22e">datasetPath</span>         <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">grpcServerAddr</span>      <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">indexingWaitSeconds</span> <span style="color:#66d9ef">uint</span>
)
</code></pre></div>  </details>
</li>
</ul>
</li>
<li>
<p>Recognition parameters.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">init</span>() {
    <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVar</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">datasetPath</span>, <span style="color:#e6db74">&#34;path&#34;</span>, <span style="color:#e6db74">&#34;fashion-mnist-784-euclidean.hdf5&#34;</span>, <span style="color:#e6db74">&#34;set dataset path&#34;</span>)
    <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">StringVar</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">grpcServerAddr</span>, <span style="color:#e6db74">&#34;addr&#34;</span>, <span style="color:#e6db74">&#34;127.0.0.1:8081&#34;</span>, <span style="color:#e6db74">&#34;set gRPC server address&#34;</span>)
    <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">UintVar</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">indexingWaitSeconds</span>, <span style="color:#e6db74">&#34;wait&#34;</span>, <span style="color:#ae81ff">60</span>, <span style="color:#e6db74">&#34;set indexing wait seconds&#34;</span>)
    <span style="color:#a6e22e">flag</span>.<span style="color:#a6e22e">Parse</span>()
}
</code></pre></div>  </details>
</li>
</ul>
<ol start="2">
<li>load</li>
</ol>
<ul>
<li>
<p>Loading from fashion-mnist dataset and set id for each vector that is loaded. This step will return the training dataset, test dataset, and ids list of ids when loading is completed with success.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ids</span>, <span style="color:#a6e22e">train</span>, <span style="color:#a6e22e">test</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">load</span>(<span style="color:#a6e22e">datasetPath</span>)
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
}
</code></pre></div>  </details>
</li>
</ul>
<ol start="3">
<li>
<p>Create the gRPC connection and Vald client with gRPC connection.</p>
 <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ctx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>()

<span style="color:#a6e22e">conn</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">grpc</span>.<span style="color:#a6e22e">DialContext</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">grpcServerAddr</span>, <span style="color:#a6e22e">grpc</span>.<span style="color:#a6e22e">WithInsecure</span>())
<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
}

<span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vald</span>.<span style="color:#a6e22e">NewValdClient</span>(<span style="color:#a6e22e">conn</span>)
</code></pre></div> </details>
</li>
<li>
<p>Insert and Index</p>
</li>
</ol>
<ul>
<li>
<p>Insert and Indexing 400 training datasets to the Vald agent.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">ids</span> [:<span style="color:#a6e22e">insertCount</span>] {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">%</span><span style="color:#ae81ff">10</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;Inserted %d&#34;</span>, <span style="color:#a6e22e">i</span>)
    }
    <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Insert</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">Object_Vector</span>{
        <span style="color:#a6e22e">Id</span>: <span style="color:#a6e22e">ids</span>[<span style="color:#a6e22e">i</span>],
        <span style="color:#a6e22e">Vector</span>: <span style="color:#a6e22e">train</span>[<span style="color:#a6e22e">i</span>],
    })
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
    }
}
</code></pre></div>  </details>
</li>
<li>
<p>Wait until indexing finish.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;Wait for indexing to finish&#34;</span>)
<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Duration</span>(<span style="color:#a6e22e">indexingWaitSeconds</span>) <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
</code></pre></div>  </details>
</li>
</ul>
<ol start="5">
<li>Search</li>
</ol>
<ul>
<li>
<p>Search 10 neighbor vectors for each 20 test datasets and return list of neighbor vector.</p>
</li>
<li>
<p>When getting approximate vectors, the Vald client sends search config and vector to the server via gRPC.</p>
  <details><summary>example code</summary><br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;Start search %d times&#34;</span>, <span style="color:#a6e22e">testCount</span>)
<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">vec</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">test</span>[:<span style="color:#a6e22e">testCount</span>] {
    <span style="color:#a6e22e">res</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Seach</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">Search_Request</span>){
        <span style="color:#a6e22e">Vector</span>: <span style="color:#a6e22e">vec</span>,
        <span style="color:#a6e22e">Config</span>: <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">Search_Config</span>{
            <span style="color:#a6e22e">Num</span>: <span style="color:#ae81ff">10</span>,
            <span style="color:#a6e22e">Radius</span>: <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,
            <span style="color:#a6e22e">Epsilon</span>: <span style="color:#ae81ff">0.01</span>,
        }
    }
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">err</span>)
    }

    <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">json</span>.<span style="color:#a6e22e">MarshalIndent</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">GetResults</span>(), <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34; &#34;</span>)
    <span style="color:#a6e22e">glg</span>.<span style="color:#a6e22e">Infof</span>(<span style="color:#e6db74">&#34;%d - Results : %s\n\n&#34;</span>, <span style="color:#a6e22e">i</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, string(<span style="color:#a6e22e">b</span>))
    <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sleep</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span>)
}
</code></pre></div>  </details>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># run example</span>
go run main.go
</code></pre></div></li>
</ol>
<h2 id="advanced">Advanced</h2>
<h3 id="customize-vald">Customize Vald</h3>
<p>Vald is highly customizable.
For example you can configure the number of vector dimension, the number of replica and etc.
You can customize Vald by creating/editing <a href="../../charts/vald/values.yaml"><code>values.yaml</code></a>.<br>
If you&rsquo;d like to configure your Vald&rsquo;s parameters, please refer to <a href="../../charts/vald/README.md">Vald&rsquo;s helm charts document</a></p>
<h3 id="another-way-to-deploy-vald">Another way to deploy Vald</h3>
<p>In the <code>Get Started</code> section, you learnt how to deploy Vald with Scylla DB using Helm.
Vald can be deployed by Helm or <code>kind</code> command. (Compressor datastore is required, for example mysql + redis or casandora ).
We will publish the document about the setup procedure and configuration in the future.</p>

  </div>
  
<aside class="current">
  <button class="menu"><span class="dot"></span></button>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#requirements">Requirements</a></li>
    <li><a href="#deploy-and-run-vald-on-k8s-cluster">Deploy and Run Vald on K8s cluster</a>
      <ul>
        <li><a href="#deploy">Deploy</a></li>
        <li><a href="#run-using-example-code">Run using example code</a></li>
      </ul>
    </li>
    <li><a href="#advanced">Advanced</a>
      <ul>
        <li><a href="#customize-vald">Customize Vald</a></li>
        <li><a href="#another-way-to-deploy-vald">Another way to deploy Vald</a></li>
      </ul>
    </li>
  </ul>
</nav>
</aside>


</div>

        </div>
      
    </main>
    <footer class="footer">
  <div class="footer__content cf">
    <ul class="footer__list">
      <li class="footer__item">
        <a href="https://vald.netlify.app/overview/about-vald" class="footer__link">About<br/></a>
      </li>
      <li class="footer__item">
        <a href="https://vald.netlify.app/docs/tutorial/get-started.md" class="footer__link">Getstarted<br/></a>
      </li>
      <li class="footer__item">
        <a href="" class="footer__link">Docs<br/></a>
      </li>
      <li class="footer__item">
        <a href="" class="footer__link">Blog<br/></a>
      </li>
      <li class="footer__item">
        <a href="https://github.com/vdaas/vald" class="footer__link footer__link--button">Github<br/></a>
      </li>
    </ul>
  </div>
  <p class="footer__copylight">©2019-2020 vald.vdaas.org Vald team</p>
</footer>

  </body>
</html>
